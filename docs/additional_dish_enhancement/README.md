# ã€Œã‚‚ã†ä¸€å“ã€æ©Ÿèƒ½å¼·åŒ– - å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ç›®æ¨™**: çŒ®ç«‹ææ¡ˆæ™‚ã«ADKã§å…¨ã‚¸ãƒ£ãƒ³ãƒ«ï¼ˆä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ãƒ»ãŠã¤ã¾ã¿ï¼‰ã®è¿½åŠ æ–™ç†ã‚’äº‹å‰ç”Ÿæˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸã‚¸ãƒ£ãƒ³ãƒ«ã«å¿œã˜ã¦å³åº§ã«æ–™ç†ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹

**æœŸé–“**: 2-3æ—¥é–“

**è¤‡é›‘åº¦**: â­â­â­â­â˜† (ã‚„ã‚„é«˜)

## ğŸ¯ æ©Ÿèƒ½è¦ä»¶

### ç¾åœ¨ã®å•é¡Œç‚¹
- âœ… UIã¯å®Ÿè£…æ¸ˆã¿ã ãŒã€ã‚¹ã‚¿ãƒ–å®Ÿè£…ã§å®Ÿéš›ã®æ–™ç†ç”Ÿæˆãªã—
- âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠå¾Œã«ç”Ÿæˆã™ã‚‹ãŸã‚å¿œç­”ãŒé…ã„ï¼ˆç¾åœ¨ã¯2ç§’ã®ãƒ€ãƒŸãƒ¼å¾…æ©Ÿï¼‰
- âŒ ç”Ÿæˆã•ã‚ŒãŸæ–™ç†ã®ä¿å­˜ãƒ»è¡¨ç¤ºæ©Ÿèƒ½ãªã—
- âŒ ADK APIã¨ã®é€£æºãŒæœªå®Ÿè£…

### å®Ÿè£…å¾Œã®æ©Ÿèƒ½
1. **äº‹å‰ç”Ÿæˆæ©Ÿèƒ½** - çŒ®ç«‹ææ¡ˆæ™‚ã«è¿½åŠ æ–™ç†ã‚‚åŒæ™‚ç”Ÿæˆ
2. **å³åº§è¡¨ç¤º** - é¸æŠã—ãŸã‚¸ãƒ£ãƒ³ãƒ«ã®æ–™ç†ã‚’å³åº§ã«è¡¨ç¤º
3. **è©³ç´°è¡¨ç¤º** - æ–™ç†åã€èª¬æ˜ã€ææ–™ã€ãƒ¬ã‚·ãƒ”ã€æ „é¤Šæƒ…å ±ã®è¡¨ç¤º
4. **å†·è”µåº«é€£æº** - ç¾åœ¨ã®é£Ÿæã«åŸºã¥ãæœ€é©ãªè¿½åŠ æ–™ç†ææ¡ˆ

## ğŸ—ï¸ å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```mermaid
flowchart TD
    A[çŒ®ç«‹ææ¡ˆãƒœã‚¿ãƒ³] --> B[AIçŒ®ç«‹ã‚µãƒ¼ãƒ“ã‚¹]
    B --> C[æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ]
    C --> D[ADK APIå‘¼ã³å‡ºã—]
    D --> E[åŸºæœ¬çŒ®ç«‹ + è¿½åŠ æ–™ç†ãƒ¬ã‚¹ãƒãƒ³ã‚¹]
    E --> F[ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ]
    F --> G[MealPlanä¿å­˜]
    G --> H[ã‚‚ã†ä¸€å“ãƒœã‚¿ãƒ³è¡¨ç¤º]
    H --> I[ã‚¸ãƒ£ãƒ³ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°]
    I --> J[è¿½åŠ æ–™ç†è©³ç´°è¡¨ç¤º]
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```yaml
data_layer:
  - MealPlan: "è¿½åŠ æ–™ç†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µ"
  - Firestore: "è¿½åŠ ãƒ‡ãƒ¼ã‚¿ä¿å­˜"

service_layer:
  - AIMealPlanningService: "æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»è§£ææ©Ÿèƒ½"
  - ADK API: "å…¨ã‚¸ãƒ£ãƒ³ãƒ«åŒæ™‚ç”Ÿæˆ"

presentation_layer:
  - AdditionalDishDisplayDialog: "è¿½åŠ æ–™ç†è©³ç´°è¡¨ç¤º"
  - Enhanced Selection Dialog: "å¼·åŒ–ã•ã‚ŒãŸã‚¸ãƒ£ãƒ³ãƒ«é¸æŠ"
```

## ğŸ“‹ å®Ÿè£…è¨ˆç”»

### Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ‹¡å¼µ ã€0.5æ—¥ã€‘

#### 1.1 MealPlanãƒ¢ãƒ‡ãƒ«ä¿®æ­£
**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/shared/models/meal_plan.dart`

**è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```dart
// æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
final Map<String, MealItem>? additionalDishes; // è¿½åŠ æ–™ç†ãƒãƒƒãƒ—
final bool additionalDishesGenerated; // ç”Ÿæˆæ¸ˆã¿ãƒ•ãƒ©ã‚°
final DateTime? additionalDishesGeneratedAt; // ç”Ÿæˆæ—¥æ™‚
```

**æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰**:
```dart
MealItem? getAdditionalDish(String dishType)
bool hasAdditionalDish(String dishType)
List<String> get availableAdditionalDishTypes
int get additionalDishCount
```

**å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ**:
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ã®äº’æ›æ€§ç¶­æŒ
- Firestoreå¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰ã®æ‹¡å¼µ
- nullå®‰å…¨æ€§ã®ç¢ºä¿

### Phase 2: AI ã‚µãƒ¼ãƒ“ã‚¹æ‹¡å¼µ ã€1æ—¥ã€‘

#### 2.1 æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè£…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/core/services/ai_meal_planning_service.dart`

**æ‹¡å¼µå†…å®¹**:
```yaml
prompt_enhancement:
  - basic_meals: "ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ãƒ»ä¸»é£Ÿ"
  - additional_dishes: "è¿½åŠ ä¸»èœãƒ»è¿½åŠ å‰¯èœãƒ»è¿½åŠ æ±ç‰©ãƒ»ãŠã¤ã¾ã¿"
  - ingredient_optimization: "å†·è”µåº«é£Ÿæã®åŠ¹ç‡çš„æ´»ç”¨"
  - variety_assurance: "åŸºæœ¬æ–™ç†ã¨ã®é‡è¤‡å›é¿"
```

**æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰**:
```dart
String _buildExtendedMealPlanPrompt(List<Ingredient>, UserPreferences)
MealPlan _parseExtendedMealPlanResponse(String, String, List<Ingredient>)
```

#### 2.2 ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æå¼·åŒ–
**å¯¾å¿œã™ã‚‹JSONã‚¹ã‚­ãƒ¼ãƒ**:
```json
{
  "basicMeals": { /* åŸºæœ¬4å“ */ },
  "additionalDishes": {
    "additionalMainDish": { /* è¿½åŠ ä¸»èœ */ },
    "additionalSideDish": { /* è¿½åŠ å‰¯èœ */ },
    "additionalSoup": { /* è¿½åŠ æ±ç‰© */ },
    "snack": { /* ãŠã¤ã¾ã¿ */ }
  },
  "shoppingList": { /* è²·ã„ç‰©ãƒªã‚¹ãƒˆ */ },
  "mealPlanSummary": { /* çŒ®ç«‹ã‚µãƒãƒªãƒ¼ */ }
}
```

### Phase 3: UIæ©Ÿèƒ½å®Ÿè£… ã€1æ—¥ã€‘

#### 3.1 è¿½åŠ æ–™ç†è©³ç´°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/features/meal_planning/presentation/widgets/additional_dish_display_dialog.dart`

**æ©Ÿèƒ½**:
- æ–™ç†åãƒ»èª¬æ˜è¡¨ç¤º
- èª¿ç†æ™‚é–“ãƒ»é›£æ˜“åº¦ãƒ»ã‚«ãƒ­ãƒªãƒ¼è¡¨ç¤º
- ææ–™ãƒªã‚¹ãƒˆï¼ˆåˆ©ç”¨å¯èƒ½æ€§è¡¨ç¤ºï¼‰
- ãƒ¬ã‚·ãƒ”æ‰‹é †è¡¨ç¤º
- çŒ®ç«‹è¿½åŠ ãƒœã‚¿ãƒ³

#### 3.2 æ—¢å­˜UIå¼·åŒ–
**ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/features/meal_planning/presentation/pages/meal_plan_screen.dart`

**ä¿®æ­£å†…å®¹**:
```dart
// ã‚¹ã‚¿ãƒ–å®Ÿè£…ã‚’å®Ÿæ©Ÿèƒ½ã«ç½®ãæ›ãˆ
Future<void> _addAdditionalDish(String dishType) async {
  // äº‹å‰ç”Ÿæˆã•ã‚ŒãŸæ–™ç†ã‚’å–å¾—ãƒ»è¡¨ç¤º
}

// é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å¼·åŒ–
void _suggestAdditionalDish(MealPlan mealPlan) {
  // åˆ©ç”¨å¯èƒ½ãªè¿½åŠ æ–™ç†ã®å‹•çš„è¡¨ç¤º
}
```

### Phase 4: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æœ€é©åŒ– ã€0.5æ—¥ã€‘

- å®Œå…¨ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- UI/UXèª¿æ•´

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆæ—¢å­˜ã¨çµ±ä¸€ï¼‰
```dart
static const Color _baseColor = Color(0xFFF6EACB);     // ã‚¯ãƒªãƒ¼ãƒ è‰²
static const Color _primaryColor = Color(0xFFD4A574);   // æ¸©ã‹ã„ãƒ™ãƒ¼ã‚¸ãƒ¥
static const Color _accentColor = Color(0xFF8B7355);    // ãƒ–ãƒ©ã‚¦ãƒ³
static const Color _textColor = Color(0xFF5D4E37);      // ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ©ã‚¦ãƒ³
```

### UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```yaml
additional_dish_dialog:
  layout: "ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªãƒ€ã‚¤ã‚¢ãƒ­ã‚°"
  header: "ã‚¸ãƒ£ãƒ³ãƒ«è¡¨ç¤º + æ–™ç†å + é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³"
  content: "èª¬æ˜ + èª¿ç†æƒ…å ± + ææ–™ + ãƒ¬ã‚·ãƒ”"
  actions: "é–‰ã˜ã‚‹ + çŒ®ç«‹ã«è¿½åŠ "

selection_dialog_enhancement:
  dynamic_options: "ç”Ÿæˆæ¸ˆã¿æ–™ç†ã®å‹•çš„è¡¨ç¤º"
  preview_info: "æ–™ç†å + èª¿ç†æ™‚é–“ + ç°¡å˜ãªèª¬æ˜"
  visual_indicators: "åˆ©ç”¨å¯èƒ½æ€§ã®è¦–è¦šè¡¨ç¤º"
```

## ğŸ”§ æŠ€è¡“ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¹ã‚­ãƒ¼ãƒ
```yaml
firestore_meal_plans:
  additional_fields:
    additionalDishes:
      type: "Map<String, Object>"
      structure: "ã‚¸ãƒ£ãƒ³ãƒ«å -> MealItemãƒ‡ãƒ¼ã‚¿"
    additionalDishesGenerated:
      type: "boolean"
      default: false
    additionalDishesGeneratedAt:
      type: "timestamp"
      nullable: true
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®
```yaml
optimization_strategies:
  generation_time:
    - current: "åŸºæœ¬çŒ®ç«‹ã®ã¿ 3-5ç§’"
    - enhanced: "è¿½åŠ æ–™ç†å«ã‚€ 4-7ç§’"
    - target: "å¢—åŠ ç‡50%ä»¥ä¸‹"
  
  memory_usage:
    - additional_data: "~20KB"
    - ui_components: "~10MB"
    - target: "ç·å¢—åŠ 30MBä»¥ä¸‹"
  
  response_time:
    - selection_to_display: "< 500ms"
    - dialog_rendering: "< 300ms"
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```yaml
error_scenarios:
  generation_failures:
    - ai_timeout: "éƒ¨åˆ†ç”Ÿæˆã§ã®ç¶™ç¶š"
    - invalid_response: "ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†"
    - network_error: "é©åˆ‡ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º"
  
  data_issues:
    - missing_fields: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã®è£œå®Œ"
    - save_failure: "ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ + å†è©¦è¡Œ"
  
  ui_errors:
    - dialog_failure: "ã‚¹ãƒŠãƒƒã‚¯ãƒãƒ¼ã§ã®ä»£æ›¿è¡¨ç¤º"
    - image_load_error: "ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼è¡¨ç¤º"
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```dart
// MealPlanãƒ¢ãƒ‡ãƒ«ã®ãƒ†ã‚¹ãƒˆ
test/shared/models/meal_plan_test.dart
- getAdditionalDish()
- hasAdditionalDish()
- availableAdditionalDishTypes
- Firestoreå¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰

// AIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
test/core/services/ai_meal_planning_service_test.dart
- æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

// UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
test/features/meal_planning/presentation/widgets/additional_dish_display_dialog_test.dart
- ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
```

### çµ±åˆãƒ†ã‚¹ãƒˆ
```dart
integration_test/additional_dish_flow_test.dart
- çŒ®ç«‹ç”Ÿæˆ â†’ è¿½åŠ æ–™ç†ç”Ÿæˆ â†’ è¡¨ç¤º â†’ è©³ç´°è¡¨ç¤ºã®å®Œå…¨ãƒ•ãƒ­ãƒ¼
- ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
```

### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
1. **æ­£å¸¸ãƒ•ãƒ­ãƒ¼**: çŒ®ç«‹ç”Ÿæˆ â†’ 4ç¨®é¡è¿½åŠ æ–™ç†ç”Ÿæˆ â†’ é¸æŠ â†’ è©³ç´°è¡¨ç¤º
2. **éƒ¨åˆ†ç”Ÿæˆ**: ä¸€éƒ¨è¿½åŠ æ–™ç†ç”Ÿæˆå¤±æ•— â†’ åˆ©ç”¨å¯èƒ½åˆ†ã®ã¿è¡¨ç¤º
3. **å®Œå…¨å¤±æ•—**: è¿½åŠ æ–™ç†ç”Ÿæˆå¤±æ•— â†’ é©åˆ‡ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
4. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼**: é€šä¿¡å¤±æ•—æ™‚ã®é©åˆ‡ãªå‡¦ç†

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### æ©Ÿèƒ½æŒ‡æ¨™
- âœ… çŒ®ç«‹ç”Ÿæˆæ™‚ã«4ç¨®é¡ã®è¿½åŠ æ–™ç†ãŒç”Ÿæˆã•ã‚Œã‚‹
- âœ… é¸æŠã—ãŸã‚¸ãƒ£ãƒ³ãƒ«ã®æ–™ç†è©³ç´°ãŒå³åº§ã«è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ææ–™ã®åˆ©ç”¨å¯èƒ½æ€§ãŒæ­£ç¢ºã«è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… å†·è”µåº«é£Ÿæã«åŸºã¥ãæœ€é©ãªæ–™ç†ãŒææ¡ˆã•ã‚Œã‚‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
- âœ… è¿½åŠ æ–™ç†é¸æŠã‹ã‚‰è¡¨ç¤ºã¾ã§ < 500ms
- âœ… çŒ®ç«‹ç”Ÿæˆæ™‚é–“ã®å¢—åŠ  < 50%
- âœ… ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å¢—åŠ  < 30MB
- âœ… ã‚¨ãƒ©ãƒ¼ç‡ < 1%

### ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æŒ‡æ¨™
- âœ… æ—¢å­˜UIã¨ã®çµ±ä¸€æ€§
- âœ… ç›´æ„Ÿçš„ãªæ“ä½œæ€§
- âœ… é©åˆ‡ãªæƒ…å ±è¡¨ç¤º
- âœ… ã‚¨ãƒ©ãƒ¼æ™‚ã®åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹

## ğŸš€ å®Ÿè£…æ‰‹é †

### 1. ç’°å¢ƒæº–å‚™
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /Users/takenakashun/Desktop/GCP-hackathon/GCP-Hackathon-F06

# ä¾å­˜é–¢ä¿‚ç¢ºèª
flutter pub get

# ç¾åœ¨ã®å®Ÿè£…ç¢ºèª
flutter test
```

### 2. Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ‹¡å¼µ
1. `MealPlan`ã‚¯ãƒ©ã‚¹ã«æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
2. æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
3. Firestoreå¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰ä¿®æ­£
4. å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆãƒ»å®Ÿè¡Œ

### 3. Phase 2: AI ã‚µãƒ¼ãƒ“ã‚¹æ‹¡å¼µ
1. æ‹¡å¼µãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè£…
2. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£ææ©Ÿèƒ½å¼·åŒ–
3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
4. ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### 4. Phase 3: UIå®Ÿè£…
1. `AdditionalDishDisplayDialog`ä½œæˆ
2. æ—¢å­˜UIä¿®æ­£ï¼ˆ`_addAdditionalDish`ç­‰ï¼‰
3. ãƒ‡ã‚¶ã‚¤ãƒ³çµ±ä¸€æ€§ç¢ºèª
4. UIãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### 5. Phase 4: çµ±åˆãƒ»æœ€é©åŒ–
1. å®Œå…¨ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ»æœ€é©åŒ–
3. ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
4. æœ€çµ‚èª¿æ•´

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. AIç”Ÿæˆã‚¨ãƒ©ãƒ¼
```yaml
å•é¡Œ: "è¿½åŠ æ–™ç†ã®ç”Ÿæˆã«å¤±æ•—ã™ã‚‹"
åŸå› : 
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒé•·ã™ãã‚‹
  - ADK APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹åˆ¶é™
  - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
è§£æ±º:
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šèª¿æ•´
  - æ®µéšçš„ç”Ÿæˆã®å®Ÿè£…
```

#### 2. ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼
```yaml
å•é¡Œ: "Firestoreã¸ã®ä¿å­˜ã«å¤±æ•—ã™ã‚‹"
åŸå› :
  - ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºåˆ¶é™
  - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šå•é¡Œ
  - æ¨©é™è¨­å®šå•é¡Œ
è§£æ±º:
  - ãƒ‡ãƒ¼ã‚¿åœ§ç¸®
  - ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…
  - æ¨©é™è¨­å®šç¢ºèª
```

#### 3. UIè¡¨ç¤ºã‚¨ãƒ©ãƒ¼
```yaml
å•é¡Œ: "ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„"
åŸå› :
  - ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ä¸æ•´åˆ
  - nullå€¤ã®å‡¦ç†ä¸å‚™
  - ãƒ¡ãƒ¢ãƒªä¸è¶³
è§£æ±º:
  - nullå®‰å…¨æ€§ã®å¼·åŒ–
  - ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªå®Ÿè£…
  - ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–
```

## ğŸ“š å‚è€ƒè³‡æ–™

### æ—¢å­˜å®Ÿè£…
- [MealPlan Model](../../../lib/shared/models/meal_plan.dart)
- [AI Meal Planning Service](../../../lib/core/services/ai_meal_planning_service.dart)
- [Meal Plan Screen](../../../lib/features/meal_planning/presentation/pages/meal_plan_screen.dart)

### æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Flutter Dialog](https://api.flutter.dev/flutter/material/Dialog-class.html)
- [Riverpod State Management](https://riverpod.dev/)
- [Cloud Firestore](https://firebase.google.com/docs/firestore)

## ğŸ‰ å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸

### å¼·åŒ–ã•ã‚ŒãŸã€Œã‚‚ã†ä¸€å“ã€é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚‚ã†ä¸€å“è¿½åŠ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å†·è”µåº«ã®é£Ÿæã‹ã‚‰ææ¡ˆã•ã‚ŒãŸè¿½åŠ æ–™ç†ã§ã™ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ– è±šã®ç”Ÿå§œç„¼ã         25åˆ†    â”‚
â”‚    ãƒ¡ã‚¤ãƒ³æ–™ç†ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¥¬ ã»ã†ã‚Œã‚“è‰ã®ãŠæµ¸ã—    15åˆ†    â”‚
â”‚    æ „é¤Šè±Šå¯Œãªç·‘é»„è‰²é‡èœã®ä¸€å“      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ² ã‚³ãƒ¼ãƒ³ã‚¹ãƒ¼ãƒ—         20åˆ†    â”‚
â”‚    å„ªã—ã„å‘³ã‚ã„ã®æ´‹é¢¨ã‚¹ãƒ¼ãƒ—        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¥’ ãã‚…ã†ã‚Šã®æµ…æ¼¬ã‘     10åˆ†    â”‚
â”‚    ã•ã£ã±ã‚Šã¨ã—ãŸç®¸ä¼‘ã‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¿½åŠ æ–™ç†è©³ç´°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥¬ å‰¯èœã®ææ¡ˆ                   â”‚
â”‚ ã»ã†ã‚Œã‚“è‰ã®ãŠæµ¸ã—         âœ•    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èª¬æ˜                           â”‚
â”‚ æ „é¤Šè±Šå¯Œãªç·‘é»„è‰²é‡èœã®ä¸€å“       â”‚
â”‚                               â”‚
â”‚ â±ï¸15åˆ† â­ç°¡å˜ ğŸ”¥80kcal        â”‚
â”‚                               â”‚
â”‚ ææ–™                           â”‚
â”‚ â— ã»ã†ã‚Œã‚“è‰ 1æŸ              â”‚
â”‚ â— ã ã—é†¤æ²¹ å¤§ã•ã˜1            â”‚
â”‚ ğŸ›’ ã‹ã¤ãŠç¯€ é©é‡              â”‚
â”‚                               â”‚
â”‚ ä½œã‚Šæ–¹                         â”‚
â”‚ â‘  ã»ã†ã‚Œã‚“è‰ã‚’èŒ¹ã§ã‚‹           â”‚
â”‚ â‘¡ æ°´æ°—ã‚’åˆ‡ã£ã¦åˆ‡ã‚‹             â”‚
â”‚ â‘¢ ã ã—é†¤æ²¹ã‚’ã‹ã‘ã‚‹             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      [é–‰ã˜ã‚‹]    [çŒ®ç«‹ã«è¿½åŠ ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

å®Ÿè£…å®Œäº†å¾Œã®æ‹¡å¼µå¯èƒ½æ€§ï¼š

1. **ç”»åƒç”Ÿæˆé€£æº** - è¿½åŠ æ–™ç†ã®ç”»åƒç”Ÿæˆ
2. **æ „é¤Šè¨ˆç®—å¼·åŒ–** - è©³ç´°ãªæ „é¤Šæƒ…å ±è¨ˆç®—
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å­¦ç¿’** - å¥½ã¿å­¦ç¿’ã«ã‚ˆã‚‹æœ€é©åŒ–
4. **å­£ç¯€æ€§è€ƒæ…®** - å­£ç¯€ã«å¿œã˜ãŸæ–™ç†ææ¡ˆ
5. **ã‚³ã‚¹ãƒˆæœ€é©åŒ–** - è²»ç”¨ã‚’è€ƒæ…®ã—ãŸææ¡ˆ
6. **èª¿ç†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«** - åŠ¹ç‡çš„ãªèª¿ç†é †åºææ¡ˆ

---

**å®Ÿè£…æ‹…å½“è€…**: Claude AI Assistant  
**ä½œæˆæ—¥**: 2025-01-19  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**å®Œæˆäºˆå®šæ—¥**: 2025-01-22
